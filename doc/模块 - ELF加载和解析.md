# ELF加载和解析

加载用户程序的模块在 `/kernel/src/loaders`中，主要负责：

- 确定 elf 文件的有效性

- 加载 elf 文件的段到合适的地址中，将地址信息和对应的权限信息写入 MemorySet 和页表，设置好数据和文件映射，保证用户程序运行时能找到原来存在elf文件中的信息

- 为动态执行程序切换解释器、对着各种 .dyn 段填入动态链接符号信息

- 设置参数变量(argv)、辅助向量(auxv)、环境变量(envx)并压入用户栈中

- 找到（对于一些 PHDR 段没有指定的用户程序来说不是“找”而是“设置”）用户程序的入口地址和用户栈顶，将其作为返回值传给调用者（一般只有 sys_clone 或 sys-exec 时才会调用这个模块）。


